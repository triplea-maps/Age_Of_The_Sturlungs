language: java
jdk:
- oraclejdk8
install: true
script:
- gradle zipMap
before_deploy:
- git config --global user.email "tripleabuilderbot@gmail.com" 
- git config --global user.name "tripleabuilderbot"
- export MAP_TAGGED_VERSION="$MAP_VERSION.$TRAVIS_BUILD_NUMBER"
- git tag $MAP_TAGGED_VERSION -a -m "$MAP_TAGGED_VERSION"
- git push -q https://$GITHUB_PERSONAL_ACCESS_TOKEN_FOR_TRAVIS@github.com/triplea-maps/$REPO_NAME --tags
deploy:
  provider: releases
  api_key:
    secure: kRIYKoR1qWSFN0VVQVcmE5h9WPyjWksW7jqaSVTyPd36BTc24JEZZEYGGIzElzKBd9vKcWYBxDFqk/x/lDZR86tdbXAET8mX17SN2EJ5lSo5mxlkaKN1EyO1bnaD7yohVYoxsx/oYA1rrRRP1m7XofXAFW6bYv0d3Mix9APCPdtH4y2ZaZHGFkL7Z1+mxIrNcr2I5ekpKClRF7UUbd6FhTweA64HiiJOUqAGxvFoPQkBzH24As+RKK3I+BFhIQlh7eQCTVHSMtAL2f4Yd7aXWnpoiYz8xvigRlzGVnsPL0/KC5SENjqgEzs2yhNTBMJDRboNZ3z+Ft9TiaJYgQfxzmTuAuXXcESwc8m8O2+3mhdg6vDyCymuA6PrEIoRQeZUCAIBxhuZfe5/dbzSusQSAd2Gmzq1duSNi9H0GW43whvtBSEq9vm/ZJmu67iRDMc7HQkX7aXfwS3QSPzZIVoiA0x8z4H0e59l7Id97TZ18+zdyLfdjYj+GPEUdh7W8GYEmEzy+1eEmk9h3/ODjsFkEGHpBj7fX1Lgz/8oUfh8PZZmhgB6tcj62IgelDsuEo+ciYgOPQ0omfffMwjle1sJ2a+d4ROIkt7hCcB5d6mQPZbm891qNeQXjeEDXGlv+AvMj5dNuXmWKm9eaZWt34J3I2l8Stm/h/K1w09XmTZSubE=
  file: "$REPO_NAME.zip"
  skip_cleanup: true
  prerelease: true
  on:
    tags: false
    all_branches: true
